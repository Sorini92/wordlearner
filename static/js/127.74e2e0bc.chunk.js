"use strict";(self.webpackChunkwordlearner=self.webpackChunkwordlearner||[]).push([[127],{9403:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var s=n(9439),r=n(2791),i=n(9434),a=n(4270),c=n(673),o=n(344),l=n(1716),d=n(2877),u=n(7799),h=n(6166),f=n(6983),m=n(5660),g=n(5633),p=n(3363),x=n(3329),v=function(){return(0,x.jsxs)("div",{className:"dot-spinner",children:[(0,x.jsx)("div",{className:"dot-spinner__dot"}),(0,x.jsx)("div",{className:"dot-spinner__dot"}),(0,x.jsx)("div",{className:"dot-spinner__dot"}),(0,x.jsx)("div",{className:"dot-spinner__dot"}),(0,x.jsx)("div",{className:"dot-spinner__dot"}),(0,x.jsx)("div",{className:"dot-spinner__dot"}),(0,x.jsx)("div",{className:"dot-spinner__dot"}),(0,x.jsx)("div",{className:"dot-spinner__dot"})]})},A=function(e){var t=e.translation,n=e.position,s=e.setVisiblePopup,i=e.visiblePopup,a=e.isTranslationComplete,c=e.handleAddWordModal,o=function(e){"SPAN"!==e.target.tagName&&s(!1)};(0,r.useEffect)((function(){return document.body.addEventListener("click",o),function(){return document.body.removeEventListener("click",o)}}),[]);var l;return(0,x.jsxs)("div",{className:i?"translationPopup active":"translationPopup",style:window.innerWidth/2>n.left?{top:n.top,left:n.left,transform:"translate(0, -100%)"}:{top:n.top,right:window.innerWidth-(n.left+n.width),transform:"translate(0, -100%)"},children:[i&&(0!==t.length?(0,x.jsxs)("div",{className:"translationPopup__content",children:[a?(l=t,l.slice(0,5).map((function(e,t){return(0,x.jsxs)("div",{className:"result",children:[(0,x.jsxs)("b",{children:[e.english,"\xa0"]})," - ",e.russian]},t)}))):(0,x.jsx)(v,{}),t.length>5?(0,x.jsx)("div",{children:"..."}):null,(0,x.jsx)("button",{onClick:function(){return c()},className:"translationPopup__btn"})]}):(0,x.jsxs)("div",{className:"translationPopup__content",children:[(0,x.jsx)("div",{className:"translationPopup__text",children:"Unknown word"}),(0,x.jsx)("button",{onClick:function(){return c()},className:"translationPopup__btn"})]})),(0,x.jsx)("div",{className:"translationPopup__arrow",style:window.innerWidth/2>n.left?{left:2,bottom:-2,transform:"rotate(73deg)"}:{right:2,bottom:-2,transform:"rotate(105deg)"}})]})},j=function(e){var t=e.words,n=e.items,i=e.loadingStatus,a=e.setSelectedSentence,c=e.cuttedArrayOfSentences,o=e.searchedSentences,l=e.handleModifyModal,d=e.onDeleteSentence,u=e.handleAddWordModal,h=e.selectedWord,v=e.setSelectedWord,j=(0,r.useState)([]),S=(0,s.Z)(j,2),w=S[0],b=S[1],_=(0,r.useState)(!1),N=(0,s.Z)(_,2),y=N[0],C=N[1],M=(0,r.useState)(!1),F=(0,s.Z)(M,2),E=F[0],U=F[1],Z=(0,r.useState)({top:0,left:0,right:0,width:0}),k=(0,s.Z)(Z,2),P=k[0],D=k[1],W=function(e){var t=[];if(h.match(/[^\u0430-\u044f-]/g)){var n=new RegExp("\\b"+h+"(s|es|ed|d|ing)?\\b","i"),s=new RegExp("\\b"+h.slice(0,-1)+"ing\\b","i");t=e.filter((function(e){return n.test(e.english)||s.test(e.english)}))}else{var r=new RegExp("(?:^|\\s)".concat(h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"(?=\\s|$)"),"iu");t=e.filter((function(e){return r.test(e.russian)}))}return t};(0,r.useEffect)((function(){b(W(t)),U(!0)}),[E]);var L=function(e,n){var s=e.target.getBoundingClientRect(),r=document.documentElement.scrollTop;U(!1),b(W(t)),v(n),C(!0),D({top:s.top+r,left:s.left,right:s.right,width:s.width})},T=function(e){return e.map((function(e,t){var n,s=0===t?e.slice(0,1).toUpperCase()+e.slice(1):e;switch(e){case",":n=(0,x.jsxs)(x.Fragment,{children:[e,"\xa0"]});break;case".":n=(0,x.jsx)(x.Fragment,{children:e});break;case"-":n=(0,x.jsxs)(x.Fragment,{children:["\xa0",e]});break;default:n=0===t?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("span",{onClick:function(t){return L(t,e)},className:o.includes(e)?"sentence__word highlighted":"sentence__word",children:s})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(x.Fragment,{children:"\xa0"}),(0,x.jsx)("span",{onClick:function(t){return L(t,e)},className:o.includes(e)?"sentence__word highlighted":"sentence__word",children:s})]})}return(0,x.jsx)(r.Fragment,{children:n},t)}))},I=c.map((function(e){return(0,x.jsx)(f.Z,{timeout:500,classNames:{appear:"sentence-appear",appearActive:"sentence-appear-active",enter:"sentence-enter",enterActive:"sentence-enter-active",exit:"sentence-exit",exitActive:"sentence-exit-active"},children:(0,x.jsxs)("ul",{className:"sentence",onClick:function(){return a(e)},children:[(0,x.jsx)("li",{className:"sentenceTable__leftItem",children:(0,x.jsx)("div",{className:"sentence",children:T(e.english)})}),(0,x.jsx)("li",{className:"sentenceTable__rightItem",children:(0,x.jsx)("div",{className:"sentence",children:T(e.russian)})}),(0,x.jsx)("div",{onClick:function(){return d(e.id)},className:"sentenceTable__buscet",children:(0,x.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAoFJREFUeF7tmz1rVUEQhp8oEgN+FEaEgBAQJIiN1kLKFDYGu3TB/AFrS/+Av8DOJikEFURbQZCkFYsUqQQhBIQoSMAPRvaQw/WeM+fs7NxcOXObE9idd2aenZltNjMM/Dcz8PwJAFEBAycQLTDwAnAfgreBD8DpTNC/gFXgZaa9aubdApJACR8lNMbCcBNO3n6nb24F/Ez2bnG6CY8AyPVTAcy1L94Cy8Csqnq84U36c6WHTX1rrv3brv76kF0DnnUVPuF9B8B8lxj6ADgLbPasgC4xeOx5BOx0Ee4DoIvef7fHCuAFcAu4ekKZvweuAVdy/VsBuE9pJTGzf28AD4AF4HFDItb1qQegBei9rnaGdwV4J6jpBwCNQFSARsg4hbUS9V5X04sKUBG1b/A+Qau+ml5UgIooKqCVgLVEve3V840WUBFFC0QLtBHw7mGrvlrgMQNURDEDYgbEDGghYB1S3vZqh8cQVBHFEIwhGEMwhmAzAe8pbtVXR1zcAiqiuAXiFohbIG6BuAUaCVivKW97dcZbr8Ej4AxwDvg+xpuWYPWStCmONvtTgPkhpRXAc+Ae8AR4OAbAeUCS+NZwFALuMrDXsH4h2R+OWV8HngIfgZvqUTdssAK4CHxN2vKAUipiEj+JW05fvteB3VynVgDi9xVwF/iRWqEqy9yYNDuJeR+4BHwCbmgGbeslAIj+l9pTtY1UmlX/WuIbtb0PbKWTF+BzVvFSACSOd8CdWkACoIIw+tXiruKqf+uxysyQ94FmyCUBSFKLwGtgScswc/1z+geK7Uz7f8xKA6g7EO1S+vVqKpX7X51SARYNapJiAWCStKfRV1TANJ7KJGMafAX8AUCo4UGMbNNbAAAAAElFTkSuQmCC",alt:"delete buscet"})}),(0,x.jsx)("div",{onClick:function(){return l()},className:"sentenceTable__pencil",children:(0,x.jsx)("img",{src:p,alt:"modify pencil"})})]})},e.id)}));return"loading"===i?(0,x.jsx)(g.Z,{}):"error"===i?(0,x.jsx)("div",{className:"error",children:"Something went wrong, error from server"}):(0,x.jsxs)(x.Fragment,{children:[0===n.length?(0,x.jsx)("div",{className:"emptyTable",children:"You have not added sentences yet!"}):0===c.length&&o.length>0?(0,x.jsx)("div",{className:"emptyTable",children:"No searched sentence!"}):(0,x.jsx)("div",{className:"sentenceTable",children:(0,x.jsx)(m.Z,{component:"div",className:"sentenceTable__wrapper",children:I})}),y&&(0,x.jsx)(A,{isTranslationComplete:E,position:P,visiblePopup:y,setVisiblePopup:C,handleAddWordModal:u,translation:w})]})},S=n(8964),w=n(2557),b=n(2810),_=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},N=function(e){var t=e.width,n=e.height,a=e.maxLength,o=e.active,l=e.setActive,d=e.address,h=e.func,f=e.items,m=e.setMessage,g=e.setShowMessage,p=(0,r.useState)(""),v=(0,s.Z)(p,2),A=v[0],j=v[1],S=(0,r.useState)(""),w=(0,s.Z)(S,2),N=w[0],y=w[1],C=(0,i.I0)(),M=function(e){e.preventDefault();var t=A.toLowerCase().split(/([ ,.]+)/).map((function(e){return e.trim()})).filter((function(e){return" "!==e&&""!==e})),n=N.toLowerCase().split(/([ ,.]+)/).map((function(e){return e.trim()})).filter((function(e){return" "!==e&&""!==e}));if(-1===f.findIndex((function(e){return _(e.english,t)}))){var s={english:t,russian:n,date:Date.now(),id:(0,b.Z)()};C(h(s));var r=(0,u.hJ)(c.Z,d.firstUrl,d.secondUrl,d.thirdUrl);(0,u.pl)((0,u.JU)(r,s.id),s),g(!0),m({text:"It's was successfully added!",color:"green"}),j(""),y(""),l(!1)}else g(!0),m({text:"It's already there!",color:"red"}),j(""),y("")};return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:o?"addSentenceModal active":"addSentenceModal",onClick:function(){return l(!1)},children:(0,x.jsx)("div",{style:{width:"".concat(t,"px"),height:"".concat(n,"px")},className:o?"addSentenceModal__content active":"addSentenceModal__content",onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),M(e))},children:(0,x.jsxs)("form",{className:"addSentenceModal__form",onSubmit:M,children:[(0,x.jsx)("div",{className:"addSentenceModal__title",children:"Add new sentence"}),(0,x.jsx)("label",{htmlFor:"english",children:"English"}),(0,x.jsx)("textarea",{value:A,maxLength:a,onChange:function(e){return j(e.target.value.replace(/[^a-zA-Z.,!?\- ]/g,""))},type:"text",id:"english",placeholder:"Write here",required:!0}),(0,x.jsx)("label",{htmlFor:"russian",children:"Russian"}),(0,x.jsx)("textarea",{value:N,maxLength:a,onChange:function(e){return y(e.target.value.replace(/[^\u0430-\u044f\u0410-\u042f.,!?\- ]/g,""))},type:"text",id:"russian",placeholder:"Write here",required:!0}),(0,x.jsxs)("div",{className:"addSentenceModal__btns",children:[(0,x.jsx)("button",{className:"addSentenceModal__closebtn",onClick:function(e){e.preventDefault(),l(!1)},children:"Close"}),(0,x.jsx)("button",{className:"addSentenceModal__btn",type:"submit",children:"Add"})]})]})})})})},y=n(5441),C=function(e){return e.join(" ").charAt(0).toUpperCase()+e.join(" ").slice(1).replace(/\s*([,.])/g,"$1")},M=function(e){var t=e.width,n=e.height,a=e.maxLength,o=e.active,l=e.setActive,d=e.address,h=e.func,f=e.items,m=e.selected,g=e.setMessage,p=e.setShowMessage,v=f.find((function(e){return e.id===m.id})),A=(0,r.useState)(""),j=(0,s.Z)(A,2),S=j[0],w=j[1],b=(0,r.useState)(""),N=(0,s.Z)(b,2),y=N[0],M=N[1],F=(0,i.I0)();(0,r.useEffect)((function(){void 0!==v&&(w(C(v.english)),M(C(v.russian)))}),[v]);var E=function(e){e.preventDefault();var t=S.toLowerCase().split(/([ ,.]+)/).map((function(e){return e.trim()})).filter((function(e){return" "!==e&&""!==e})),n=y.toLowerCase().split(/([ ,.]+)/).map((function(e){return e.trim()})).filter((function(e){return" "!==e&&""!==e}));if(-1===f.findIndex((function(e){return _(e.english,t)}))){var s={english:t,russian:n,id:v.id,date:v.date};F(h(s)),l(!1);var r=(0,u.hJ)(c.Z,d.firstUrl,d.secondUrl,d.thirdUrl);(0,u.pl)((0,u.JU)(r,s.id),s),p(!0),g({text:"It's was successfully modifyied!",color:"green"})}else p(!0),g({text:"It's already there!",color:"red"})};return(0,x.jsx)("div",{className:o?"modifySentenceModal active":"modifySentenceModal",onClick:function(){return l(!1)},children:(0,x.jsx)("div",{style:{width:"".concat(t,"px"),height:"".concat(n,"px")},className:o?"modifySentenceModal__content active":"modifySentenceModal__content",onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),E(e))},children:(0,x.jsxs)("form",{className:"modifySentenceModal__form",onSubmit:E,children:[(0,x.jsx)("div",{className:"modifySentenceModal__title",children:"Modify sentence"}),(0,x.jsx)("label",{htmlFor:"english",children:"English"}),(0,x.jsx)("textarea",{value:S,maxLength:a,onChange:function(e){return w(e.target.value.replace(/[^a-zA-Z.,!?\- ]/g,""))},type:"text",id:"english",placeholder:"Write here",required:!0}),(0,x.jsx)("label",{htmlFor:"russian",children:"Russian"}),(0,x.jsx)("textarea",{value:y,maxLength:a,onChange:function(e){return M(e.target.value.replace(/[^\u0430-\u044f\u0410-\u042f.,!?\- ]/g,""))},type:"text",id:"russian",placeholder:"Write here",required:!0}),(0,x.jsxs)("div",{className:"modifySentenceModal__btns",children:[(0,x.jsx)("button",{className:"modifySentenceModal__closebtn",onClick:function(e){e.preventDefault(),l(!1)},children:"Close"}),(0,x.jsx)("button",{className:"modifySentenceModal__btn",type:"submit",children:"Modify"})]})]})})})},F=n(5165),E=n(7333),U=function(){var e=(0,i.v9)((function(e){return e.sentences})),t=e.sentencesLoadingStatus,n=e.sentences,f=e.sentencesPerUpload,m=e.sortType,g=e.currentPage,p=e.totalPages,v=(0,i.v9)((function(e){return e.words})).words,A=(0,r.useState)(!1),b=(0,s.Z)(A,2),_=b[0],C=b[1],U=(0,r.useState)(!1),Z=(0,s.Z)(U,2),k=Z[0],P=Z[1],D=(0,r.useState)(!1),W=(0,s.Z)(D,2),L=W[0],T=W[1],I=(0,r.useState)({}),B=(0,s.Z)(I,2),R=B[0],V=B[1],K=(0,r.useState)(!1),q=(0,s.Z)(K,2),J=q[0],O=q[1],Q=(0,r.useState)(30),G=(0,s.Z)(Q,2),X=G[0],Y=G[1],z=(0,r.useState)([]),H=(0,s.Z)(z,2),$=H[0],ee=H[1],te=(0,r.useState)(0),ne=(0,s.Z)(te,2),se=ne[0],re=ne[1],ie=(0,r.useState)({}),ae=(0,s.Z)(ie,2),ce=ae[0],oe=ae[1],le=(0,r.useState)(""),de=(0,s.Z)(le,2),ue=de[0],he=de[1],fe=(0,r.useState)(""),me=(0,s.Z)(fe,2),ge=me[0],pe=me[1],xe=(0,i.I0)(),ve=(0,o.Z)(),Ae=ve.isAuth,je=ve.id,Se={firstUrl:"users",secondUrl:je,thirdUrl:"sentences"},we={firstUrl:"users",secondUrl:je,thirdUrl:"words"};(0,r.useEffect)((function(){null!==je&&(xe((0,l.js)(je)),xe((0,d.UA)(je)))}),[je]),(0,r.useEffect)((function(){l.eh&&xe((0,l.MR)(m))}),[m,n]),(0,r.useEffect)((function(){document.body.style.overflow=k||L||_?"hidden":"auto"}),[k,L,_]),(0,r.useEffect)((function(){var e=function(e){"Escape"===e.key&&(P(!1),T(!1))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),(0,r.useEffect)((function(){oe({})}),[ue.length]),(0,r.useEffect)((function(){Y(f*g)}),[g]),(0,r.useEffect)((function(){ue.length>0?xe(se%f?(0,l.K$)(Math.ceil(se/f)):(0,l.K$)(se/f)):n.length%f?xe((0,l.K$)(Math.ceil(n.length/f))):xe((0,l.K$)(n.length/f))}),[n,f,ue.length,se,p]),(0,r.useEffect)((function(){var e=g*f,t=e-f;ue.length>0?ee(be(n).slice(t,e)):ee(n.slice(t,e))}),[n,X,ue.length,f,g]);var be=function(e){var t=[];if(ue.length>0){var n=ue.split(" ");t=/^[A-Za-z\s!.,?-]+$/.test(ue)?e.filter((function(e){return n.every((function(t){return e.english.some((function(e){return e.includes(t)}))}))})):e.filter((function(e){return n.every((function(t){return e.russian.some((function(e){return e.includes(t)}))}))}))}return re(t.length),t};return Ae?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(a.q,{children:[(0,x.jsx)("meta",{name:"description",content:"sentences page"}),(0,x.jsx)("title",{children:"Sentences"})]}),(0,x.jsx)(h.Z,{items:n,setSearched:he,setOffset:Y,numberPerUpload:f}),(0,x.jsx)(S.Z,{items:$,handleAddModal:function(){P(!k)},filteredArrayLength:se,sortItems:[{name:"from new"},{name:"from old"}],active:m,textForSelectPopup:"Sort by:",dispatchFunction:l.MR,activeTypeChanged:l.eh,address:Se}),(0,x.jsx)(j,{words:v,items:n,loadingStatus:t,setSelectedSentence:oe,selectedSentence:ce,cuttedArrayOfSentences:$,searchedSentences:ue,handleModifyModal:function(){void 0!==ce?T(!L):(O(!0),V({text:"Choose the word!",color:"red"}))},onDeleteSentence:function(e){var t=(0,u.hJ)(c.Z,Se.firstUrl,Se.secondUrl,Se.thirdUrl);window.confirm("Are you sure?")&&(xe((0,l.G6)(e)),(0,u.oe)((0,u.JU)(t,e)),oe({}),O(!0),V({text:"The word was successfully deleted!",color:"green"}))},handleAddWordModal:function(){C(!_)},selectedWord:ge,setSelectedWord:pe}),(0,x.jsx)(E.Z,{cuttedArray:$,filteredArrayLength:se,numberPerUpload:f,currentPage:g,totalPages:p,setPage:l.YA,numberOfItemsPerPage:[{name:10},{name:20},{name:30}],active:f,textForSelectPopup:"On the page:",textForCounters:"sentences",dispatchFunction:l.ef,switchToFirstPage:function(){xe((0,l.YA)(1))},loadingStatus:t,items:n}),(0,x.jsx)(N,{width:600,height:310,maxLength:190,active:k,setActive:P,address:Se,func:l.iF,items:n,setShowMessage:O,setMessage:V}),(0,x.jsx)(y.Z,{width:290,height:230,maxLength:30,active:_,setActive:C,address:we,func:d.ge,items:v,setShowMessage:O,setMessage:V,selectedWord:ge}),(0,x.jsx)(M,{width:600,height:310,maxLength:190,active:L,setActive:T,address:Se,func:l.i,items:n,selected:ce,setShowMessage:O,setMessage:V}),(0,x.jsx)(w.Z,{message:R.text,showMessage:J,setShowMessage:O,color:R.color}),(0,x.jsx)(F.Z,{})]}):null}},3363:function(e,t,n){e.exports=n.p+"static/media/pencil.4b1eb32308269ca45566.png"}}]);
//# sourceMappingURL=127.74e2e0bc.chunk.js.map